# Результаты

Исходные `.las` обработаны с помощью методов топологического анализа.
Выявлены зоны интереса и сохранены в векторные файлы в папке `shapes`.
Использовалось 3 разных метода анализа, каждый даёт лучше результаты для разных задач:
- `fromZero` - высота анализируется "снизу-вверх". Чаще всего при таком подходе определяются углубления.
- `fromMax` - анализ производится сверху вниз, позволяя лучше определить возвышенности и бугры.
- `radius` - сперва выделяются объекты из точек со схожей высотой, затем они расширяются.

Использованный код обработки хранится в файле `main.py` в виде набора функций.
Для получения shape файла из карты высот, необходимо вызвать функцию `process_las_file` и передать туда путь к исходному файлу, выходной путь и экземпляра объекта с настройками чтения и обработки `LasReaderSetup`. Пример работы также есть в `main.py`. Для обработки сразу нескольких файлов с облаком точек есть функция `process_multiple_files`.

## Как это работает
1. Открывается las файл
2. Файл читается по тайлам с наложением
3. Точки от тайла сужаются и проецируются на матрицу
4. По матрице строится топологчисеская характеристика
5. Их характеристики извлекаются найденные объекты
6. Объекты векторизируются и проецируются по системе координат файла
7. Найденные объекты фильтруются и записываются в выходной файл

## Пример использования

```python
preferences = LasReaderSetup()

# В las точки неравномерны, между x1 и x10 может быть 3-5 точек,
# поэтому нужно уменьшить размерность
preferences.aproximateRectSize = 10

# Целиком обработка файла слишком затратна из-а большого размера
# Для выполнения обработки на обычном компьютере необходимо разбить на чанки
# Размер указывается в пикселях после уменьшения размерности
preferences.chunkSize = 1500

# Так как важные объекты могут быть на границе чанка, нужно брать с захлёстом
# В идеале размер нахлёста - максимальный размер объекта
preferences.chunkOversize = 100

preferences.procType = bc.ProcType.Radius

# True - Пропускать отсутствующие данные, тогда в обарботки используются только существующие точки (области точек
# False - подставлять на место отсутствующих точек значение по умолчанию (-9999 или 9999)
preferences.useMask = False

process_las_file(las_file_path, output, preferences)
```

## Проекция растра

Чтобы привязать изображение к las файлу, написан скрипт `bind_image.py`
